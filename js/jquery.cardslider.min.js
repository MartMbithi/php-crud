!function(a){"object"==typeof module&&"object"==typeof module.exports?a(require("jquery"),window,document):a(jQuery,window,document)}(function(a,b,c,d){"use strict";function e(b,c){this.element=b,this.settings=a.extend({},g,c),this._defaults=g,this._name=f,this._cards=[],this._activeCard=null,this._directionClass="cardslider--direction-"+this.settings.direction,this._animationClassBack="cardslider--sortback-"+this.settings.direction,this._animationClassFront="cardslider--sortfront-"+this.settings.direction,this._dotnav=null,this._directionnav=null,this._buttonNext=null,this._buttonPrev=null,this._xDown=null,this._yDown=null,this._swipeThreshold=100,this.init()}var f="cardslider",g={keys:{next:38,prev:40},direction:"down",nav:!0,swipe:!1,dots:!1,loop:!1,beforeCardChange:null,afterCardChange:null};a.extend(e.prototype,{init:function(){this.initCards(),this.settings.nav&&this.initNav(),this.settings.dots&&this.initDots(),this.settings.swipe&&this.initSwipe(),this.settings.keys!==!1&&b.addEventListener("keydown",this.keyNav.bind(this)),this.changeCardTo(0)},initCards:function(){this.element.className=this.element.className+" cardslider "+this._directionClass;var a=this.element.querySelector("ul");if(!a)return!1;a.classList.add("cardslider__cards");for(var b=a.querySelectorAll("li"),c=0;c<b.length;c++){var d=b[c],e={elem:d,active:0===c,index:c,cardClass:"cardslider__card--index-"+c};e.elem.className=e.elem.className+" cardslider__card cardslider__card--transitions "+e.cardClass,e.elem.style.zIndex=b.length-c,this._cards.push(e)}},initNav:function(){this._directionnav=c.createElement("div"),this._directionnav.className="cardslider__direction-nav",this._buttonNext=c.createElement("button"),this._buttonNext.title="next",this._buttonNext.className="cardslider__nav-next",this._buttonNext.innerHTML="Next",this._buttonNext.addEventListener("click",this.nextCard.bind(this)),this._buttonPrev=c.createElement("button"),this._buttonPrev.title="previous",this._buttonPrev.className="cardslider__nav-prev",this._buttonPrev.innerHTML="Prev",this._buttonPrev.addEventListener("click",this.prevCard.bind(this)),this._directionnav.appendChild(this._buttonNext),this._directionnav.appendChild(this._buttonPrev),this.element.appendChild(this._directionnav)},initDots:function(){var a=this;this._dotnav=c.createElement("ul"),this._dotnav.className="cardslider__dots-nav";for(var b=0;b<this._cards.length;b++){var d=c.createElement("button");d.className="cardslider__dot-btn",d.setAttribute("data-slide",b),d.setAttribute("type","button"),d.addEventListener("click",function(b){a.changeCardTo(parseInt(b.target.getAttribute("data-slide")))});var e=c.createElement("li");e.className="cardslider__dot",e.appendChild(d),this._dotnav.appendChild(e)}this.element.appendChild(this._dotnav)},initSwipe:function(){this.element.addEventListener("touchstart",this.handleTouchStart.bind(this)),this.element.addEventListener("touchmove",this.handleTouchEnd.bind(this))},handleTouchStart:function(a){this._xDown=a.touches[0].clientX,this._yDown=a.touches[0].clientY},handleTouchEnd:function(a){if(a.preventDefault(),this._xDown&&this._yDown){var b=!1,c=!1,d=a.touches[0].clientX,e=a.touches[0].clientY,f=this._xDown-d,g=this._yDown-e;if(Math.abs(f)>Math.abs(g)){if(Math.abs(f)<this._swipeThreshold)return;f>0?"left"==this.settings.direction?b=!0:"right"==this.settings.direction&&(c=!0):"right"==this.settings.direction?b=!0:"left"==this.settings.direction&&(c=!0)}else{if(Math.abs(g)<this._swipeThreshold)return;g>0?"up"==this.settings.direction?b=!0:"down"==this.settings.direction&&(c=!0):"down"==this.settings.direction?b=!0:"up"==this.settings.direction&&(c=!0)}b?this.nextCard():c&&this.prevCard(),this._xDown=null,this._yDown=null}},keyNav:function(a){a.keyCode==this.settings.keys.next?(a.preventDefault(),this.nextCard()):a.keyCode==this.settings.keys.prev&&(a.preventDefault(),this.prevCard())},nextCard:function(){this._activeCard.index+1<this._cards.length?this.changeCardTo(this._activeCard.index+1):this.settings.loop&&this.changeCardTo(0,!0)},prevCard:function(){this._activeCard.index-1>=0?this.changeCardTo(this._activeCard.index-1):this.settings.loop&&this.changeCardTo((this._cards.length-1)*-1)},changeCardTo:function(a,b){b="undefined"!=typeof b&&b,"string"==typeof a&&(a="first"==a?0:this._cards.length-1);var c=Math.abs(a),d=this._activeCard,e=this._cards[c];if(this.settings.loop){var f=this;this._cards.forEach(function(a){a.elem.classList.remove(f._animationClassFront),a.elem.classList.remove(f._animationClassBack),a.elem.classList.add("cardslider__card--transitions")})}if("function"==typeof this.settings.beforeCardChange&&this.settings.beforeCardChange(d.index),d&&(a>d.index||a<d.index&&b)||!d&&a>0){for(var g=0;g<c;g++)this._cards[g].elem.setAttribute("aria-hidden",!0),this.settings.loop||this._cards[g].elem.classList.add("cardslider__card--out");this.settings.loop&&null!=d&&(d.elem.classList.remove("cardslider__card--transitions"),d.elem.classList.add(this._animationClassBack))}else d&&(this.settings.loop&&d&&(this._cards[c].elem.classList.remove("cardslider__card--transitions"),this._cards[c].elem.classList.add(this._animationClassFront)),this._cards.forEach(function(a){a.elem.classList.add("cardslider__card--out"),a.elem.setAttribute("aria-hidden",!0)}));return this._activeCard=e,this._activeCard.elem.setAttribute("aria-hidden",!1),this.reorderIndices(c),this.settings.dots&&this.changeDots(c),"function"==typeof this.settings.afterCardChange&&this.settings.afterCardChange(c),this},changeDots:function(a){var b=this._dotnav.querySelector(".cardslider__dot--active");b&&b.classList.remove("cardslider__dot--active");var c=this._dotnav.querySelector(".cardslider__dot:nth-child("+(a+1)+")");c&&c.classList.add("cardslider__dot--active")},reorderIndices:function(a){var b=this;this._cards.forEach(function(c,d){if(d-a>=0){var e=c.elem.className;e=e.replace(/cardslider__card--index-\d|cardslider__card--out/g,""),c.elem.className=e.replace("  "," ").trim(),c.elem.classList.add(b._cards[d-a].cardClass),b.settings.loop&&b.setZindex(c,b._cards.length-1-b._cards[d-a].index)}else if(b.settings.loop){var e=c.elem.className;e=e.replace(/cardslider__card--index-\d|cardslider__card--out/g,""),c.elem.className=e.replace("  "," ").trim(),c.elem.classList.add(b._cards[b._cards.length-(a-d)].cardClass),b.setZindex(c,b._cards.length-1-b._cards[b._cards.length-(a-d)].index)}})},setZindex:function(a,b){a.elem.style.zIndex=b},destroy:function(){var a=this.element.querySelector(".cardslider__cards");return this.element.className=this.element.className.replace(this.element.className.match(/card.*/g)[0],""),a.classList.remove("cardslider__cards"),this._cards.forEach(function(a){a.elem.className=a.elem.className.replace(a.elem.className.match(/card.*/g)[0],""),a.elem.removeAttribute("style"),a.elem.removeAttribute("aria-hidden")}),this._dotnav&&(this._dotnav.parentElement.removeChild(this._dotnav),this._dotnav=null),this._directionnav&&(this._directionnav.parentElement.removeChild(this._directionnav),this._directionnav=null),this._cards=[],this._activeCard=null,this.settings.keys!==!1&&b.removeEventListener("keydown",this.keyNav),this._buttonNext&&this._buttonNext.removeEventListener("cardslider",this.nextCard),this._buttonPrev&&this._buttonPrev.removeEventListener("cardslider",this.prevCard),this}}),a.fn[f]=function(b){return this.each(function(){a.data(this,f)||a.data(this,f,new e(this,b))})}});